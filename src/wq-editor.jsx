import React from 'react';
import ReactDOM from 'react-dom';
import {
    convertFromRaw,
    convertToRaw,
    CompositeDecorator,
    ContentState,
    Editor,
    EditorState,
    Entity,
} from 'draft-js';
import './style/wqeditor.css';

import WqToolbar from './component/wq-toolbar.jsx'


/**
 * Copyright (c) 2018-present, zhouwenqi, Inc.
 * All rights reserved.
 * 
 * WqEditor
 * date:2018/5/10
 * 
 * Extended development based on draft.js
 * @author zhouwenqi
 * @version 1.0.1
 */
export default class WqEditor extends React.Component {
    constructor(props) {
        super(props);
        this.state = {editorState: EditorState.createEmpty()};
        this.onChange = (editorState) => this.setState({editorState});
    }
    render() {
        return <div className="wq-editor-box">
            <div className="wq-editor-svgbox">
                <svg xmlns="http://www.w3.org/2000/svg">
                    <symbol id="wqToolsIcoFontFamily">
                        <title>FontFamily</title>
                        <path d="M451.035429 319.414857l-97.133715 257.133714c56.576 0.585143 113.152 2.304 169.728 2.304 10.861714 0 21.723429-0.585143 32.585143-1.133714-29.696-86.857143-64.585143-175.433143-105.142857-258.304zM36.754286 950.857143l1.133714-45.129143c53.723429-16.566857 112.018286-5.156571 136.009143-66.852571l135.424-352 160-413.696h73.142857c2.304 3.986286 4.571429 8.009143 6.290286 11.995428l117.138285 274.285714c42.861714 101.156571 82.285714 203.446857 125.696 304.018286 25.709714 59.428571 45.714286 120.576 74.276572 178.870857 3.986286 9.142857 11.995429 26.294857 20.004571 32.585143 18.870857 14.848 71.424 18.285714 98.304 28.562286 1.718857 10.861714 3.437714 21.723429 3.437715 32.585143 0 5.156571-0.585143 9.728-0.585143 14.848-72.557714 0-145.152-9.142857-217.709715-9.142857-74.861714 0-149.723429 6.290286-224.585142 8.557714 0-14.848 0.585143-29.696 2.304-44.580572L621.897143 889.746286c15.433143-3.437714 45.714286-7.424 45.714286-28.562286 0-20.553143-73.728-190.281143-82.870858-213.723429l-257.133714-1.133714c-14.848 33.133714-72.557714 182.857143-72.557714 204.580572 0 43.995429 84.004571 45.714286 116.553143 50.285714 0.585143 10.861714 0.585143 21.723429 0.585143 33.133714 0 5.156571-0.585143 10.276571-1.133715 15.433143-66.304 0-133.156571-11.446857-199.424-11.446857-8.009143 0-19.419429 3.437714-27.428571 4.571428-35.986286 6.290286-71.424 8.009143-107.446857 8.009143z"></path>
                    </symbol>
                    <symbol id="wqToolsIcoFontSize">
                        <title>FontSize</title>
                        <path d="M954.368 794.24l-34.816 0L754.56 391.808c0 0-4.736-6.656-14.656-7.744-9.92-1.024-25.28 5.184-25.28 5.184l-176 404.992L531.328 794.24C516.544 794.24 512 800.64 512 814.4 512 828.032 519.936 832 534.72 832l102.72 0c14.656 0 26.816-4.096 26.816-17.6 0-13.76-12.096-20.096-26.816-20.096L610.944 794.304l37.056-87.296 191.104 0 37.632 87.296-42.432 0c-14.784 0-26.88 6.4-26.88 20.096 0 13.696 12.032 17.6 26.88 17.6l120.064 0c14.848 0 26.816-3.968 26.816-17.6C981.184 800.64 969.28 794.24 954.368 794.24zM665.216 669.248 746.56 486.4l77.312 182.848L665.216 669.248zM261.056 772.608l-41.6 0 58.112-137.088 252.928 0 60.928-138.368L445.248 140.288c0 0-7.616-10.496-23.104-12.096C406.592 126.592 382.336 136.256 382.336 136.256l-276.544 636.352L94.464 772.608C71.104 772.608 64 782.656 64 804.224 64 825.728 76.544 832 99.776 832l161.344 0c23.296 0 42.176-6.4 42.176-27.776C303.232 782.656 284.352 772.608 261.056 772.608zM432.576 288.896l121.408 287.36L304.64 576.256 432.576 288.896z"></path>
                    </symbol>
                    <symbol id="wqToolsIcoFontColor">
                        <title>FontColor</title>
                        <path d="M797.504 655.36 752.64 655.36 540.672 138.048c0 0-6.272-8.576-18.944-9.92C508.992 126.784 489.216 134.72 489.216 134.72L262.912 655.36 253.632 655.36c-19.072 0-24.896 8.256-24.896 25.856 0 17.472 10.24 22.656 29.248 22.656l131.968 0c19.008 0 34.496-5.12 34.496-22.656S409.024 655.36 389.952 655.36L355.968 655.36l47.616-112.128 245.632 0L697.6 655.36l-54.656 0c-19.072 0-34.496 8.256-34.496 25.856 0 17.472 15.488 22.656 34.56 22.656l154.432 0C816.576 704 832 698.88 832 681.28 832 663.68 816.576 655.36 797.504 655.36zM425.664 494.72l104.64-235.072L629.696 494.72 425.664 494.72zM928 928l-768 0 0-128 768 0L928 928z"></path>
                    </symbol>
                    <symbol id="wqToolsIcoListOl">
                        <title>List-Ol</title>
                        <g>
                        <path d="M219.456 804.576q0 45.728-32 77.728t-77.728 32-77.728-32-32-77.728 32-77.728 77.728-32 77.728 32 32 77.728zM219.456 512q0 45.728-32 77.728t-77.728 32-77.728-32-32-77.728 32-77.728 77.728-32 77.728 32 32 77.728zM1024.032 749.728l0 109.728q0 7.424-5.44 12.864t-12.864 5.44l-694.848 0q-7.424 0-12.864-5.44t-5.44-12.864l0-109.728q0-7.424 5.44-12.864t12.864-5.44l694.848 0q7.424 0 12.864 5.44t5.44 12.864zM219.456 219.424q0 45.728-32 77.728t-77.728 32-77.728-32-32-77.728 32-77.728 77.728-32 77.728 32 32 77.728zM1024.032 457.152l0 109.728q0 7.424-5.44 12.864t-12.864 5.44l-694.848 0q-7.424 0-12.864-5.44t-5.44-12.864l0-109.728q0-7.424 5.44-12.864t12.864-5.44l694.848 0q7.424 0 12.864 5.44t5.44 12.864zM1024.032 164.576l0 109.728q0 7.424-5.44 12.864t-12.864 5.44l-694.848 0q-7.424 0-12.864-5.44t-5.44-12.864l0-109.728q0-7.424 5.44-12.864t12.864-5.44l694.848 0q7.424 0 12.864 5.44t5.44 12.864z"></path>
                        </g>                        
                    </symbol>
                    <symbol id="wqToolsIcoListUl">
                        <title>List-Ul</title>
                        <g>
                        <path d="M217.728 925.728q0 45.728-31.136 72t-77.44 26.272q-60.576 0-98.272-37.728l32.576-50.272q28 25.728 60.576 25.728 16.576 0 28.864-8.288t12.288-24.288q0-36.576-60-32l-14.848-32q4.576-5.728 18.56-24.864t24.288-30.848 21.152-22.016l0-0.576q-9.152 0-27.712 0.576t-27.712 0.576l0 30.272-60.576 0 0-86.848 190.272 0 0 50.272-54.272 65.728q29.152 6.848 46.272 28t17.152 50.272zM218.848 567.424l0 90.848-206.848 0q-3.424-20.576-3.424-30.848 0-29.152 13.44-53.152t32.288-38.848 37.728-27.136 32.288-24.864 13.44-25.728q0-14.272-8.288-22.016t-22.56-7.712q-26.272 0-46.272 33.152l-48.576-33.728q13.728-29.152 40.864-45.44t60.288-16.288q41.728 0 70.272 23.712t28.576 64.288q0 28.576-19.424 52.288t-42.848 36.864-43.136 28.864-20.288 30.016l72.576 0 0-34.272 60 0zM1024 749.728l0 109.728q0 7.424-5.44 12.864t-12.864 5.44l-694.848 0q-7.424 0-12.864-5.44t-5.44-12.864l0-109.728q0-8 5.152-13.152t13.152-5.152l694.848 0q7.424 0 12.864 5.44t5.44 12.864zM219.424 236l0 56.576-191.424 0 0-56.576 61.152 0q0-23.424 0.288-69.728t0.288-69.152l0-6.848-1.152 0q-4.576 9.728-28.576 30.848l-40.576-43.424 77.728-72.576 60.576 0 0 230.848 61.728 0zM1024 457.152l0 109.728q0 7.424-5.44 12.864t-12.864 5.44l-694.848 0q-7.424 0-12.864-5.44t-5.44-12.864l0-109.728q0-8 5.152-13.152t13.152-5.152l694.848 0q7.424 0 12.864 5.44t5.44 12.864zM1024 164.576l0 109.728q0 7.424-5.44 12.864t-12.864 5.44l-694.848 0q-7.424 0-12.864-5.44t-5.44-12.864l0-109.728q0-7.424 5.44-12.864t12.864-5.44l694.848 0q7.424 0 12.864 5.44t5.44 12.864z" p-id="4716"></path> 
                        </g>                        
                    </symbol>
                    <symbol id="wqToolsIcoUnderline">
                        <title>Underline</title>
                        <g>
                        <path d="M100.49879 127.414857q-21.138286-1.170286-25.746286-2.267429l-1.682286-50.322286q7.460571-0.585143 22.820571-0.585143 34.304 0 64 2.267429 75.410286 4.022857 94.866286 4.022857 49.152 0 96.036571-1.682286 66.267429-2.267429 83.456-2.852571 32.036571 0 49.152-1.170286l-0.585143 7.972571 1.170286 36.571429 0 5.12q-34.304 5.12-70.875429 5.12-34.304 0-45.129143 14.262857-7.460571 7.972571-7.460571 75.410286 0 7.460571 0.292571 18.578286t0.292571 14.555429l0.585143 130.852571 7.972571 160.036571q3.437714 70.875429 29.110857 115.419429 19.968 33.718857 54.857143 52.589714 50.322286 26.843429 101.156571 26.843429 59.465143 0 109.129143-16.018286 32.036571-10.313143 56.539429-29.110857 27.428571-20.553143 37.156571-36.571429 20.553143-32.036571 30.281143-65.170286 11.995429-41.691429 11.995429-130.852571 0-45.129143-1.974857-73.142857t-6.290286-69.997714-7.68-91.136l-2.267429-33.718857q-2.852571-38.253714-13.677714-50.322286-19.456-19.968-44.032-19.456l-57.124571 1.170286-7.972571-1.682286 1.170286-49.152 47.981714 0 117.174857 5.705143q43.446857 1.682286 111.981714-5.705143l10.313143 1.170286q3.437714 21.723429 3.437714 29.110857 0 4.022857-2.267429 17.700571-25.746286 6.875429-47.981714 7.460571-41.691429 6.290286-45.129143 9.728-8.557714 8.557714-8.557714 23.405714 0 4.022857 0.877714 15.433143t0.877714 17.700571q4.534857 10.825143 12.580571 226.304 3.437714 111.396571-8.557714 173.714286-8.557714 43.446857-23.405714 69.705143-21.723429 37.156571-64 70.290286-42.861714 32.548571-104.009143 50.834286-62.317714 18.870857-145.700571 18.870857-95.451429 0-162.304-26.258286-68.022857-26.843429-102.253714-69.705143-34.889143-43.446857-47.396571-111.396571-9.142857-45.714286-9.142857-135.460571l0-190.317714q0-107.446857-9.728-121.709714-14.262857-20.553143-83.968-22.308571zM950.784504 932.571429l0-36.571429q0-7.972571-5.12-13.165714t-13.165714-5.12l-841.142857 0q-7.972571 0-13.165714 5.12t-5.12 13.165714l0 36.571429q0 7.972571 5.12 13.165714t13.165714 5.12l841.142857 0q7.972571 0 13.165714-5.12t5.12-13.165714z"></path>                        
                        </g>                        
                    </symbol>
                    <symbol id="wqToolsIcoStrikeline">
                        <title>Underline</title>
                        <g>
                        <path d="M1005.715302 512q7.972571 0 13.165714 5.12t5.12 13.165714l0 36.571429q0 7.972571-5.12 13.165714t-13.165714 5.12l-987.428571 0q-7.972571 0-13.165714-5.12t-5.12-13.165714l0-36.571429q0-7.972571 5.12-13.165714t13.165714-5.12l987.428571 0zM275.969016 475.428571q-16.018286-19.968-29.110857-45.714286-27.428571-55.442286-27.428571-107.446857 0-103.424 76.580571-176.566857 75.995429-72.557714 224.548571-72.557714 28.598857 0 95.451429 10.825143 37.741714 6.875429 101.156571 27.428571 5.705143 21.723429 11.995429 67.437714 7.972571 70.290286 7.972571 104.594286 0 10.313143-2.852571 25.746286l-6.875429 1.682286-47.981714-3.437714-7.972571-1.170286q-28.598857-85.138286-58.88-117.174857-50.322286-52.004571-120.027429-52.004571-65.170286 0-104.009143 33.718857-38.253714 33.133714-38.253714 83.456 0 41.691429 37.741714 80.018286t159.451429 73.728q39.424 11.410286 98.889143 37.741714 33.133714 16.018286 54.272 29.696l-424.594286 0zM565.687873 621.714286l234.861714 0q4.022857 22.308571 4.022857 52.589714 0 63.414857-23.405714 121.124571-13.165714 31.451429-40.594286 59.465143-21.138286 19.968-62.317714 46.299429-45.714286 27.428571-87.405714 37.741714-45.714286 11.995429-116.004571 11.995429-65.170286 0-111.396571-13.165714l-80.018286-22.820571q-32.548571-9.142857-41.179429-16.018286-4.534857-4.534857-4.534857-12.580571l0-7.460571q0-61.732571-1.170286-89.161143-0.585143-17.115429 0-38.838857l1.170286-21.138286 0-25.161143 58.294857-1.170286q8.557714 19.456 17.115429 40.594286t12.873143 32.036571 7.168 15.433143q19.968 32.548571 45.714286 53.686857 24.576 20.553143 59.977143 32.548571 33.718857 12.580571 75.410286 12.580571 36.571429 0 79.433143-15.433143 44.032-14.848 69.705143-49.152 26.843429-34.889143 26.843429-73.728 0-47.981714-46.299429-89.746286-19.456-16.603429-78.262857-40.594286z"></path>                        
                        </g>                        
                    </symbol>
                    <symbol id="wqToolsIcoItalic">
                        <title>Italic</title>
                        <g>
                        <path d="M219.465143 949.686857l9.728-48.566857q3.437714-1.170286 46.592-12.288t63.707429-21.430857q16.018286-19.968 23.405714-57.709714 0.585143-4.022857 35.401143-165.156571t65.170286-310.564571 29.696-169.398857l0-14.262857q-13.677714-7.460571-31.158857-10.605714t-39.716571-4.534857-33.133714-3.145143l10.825143-58.88q18.870857 1.170286 68.534857 3.730286t85.430857 4.022857 68.827429 1.462857q27.428571 0 56.32-1.462857t69.12-4.022857 56.32-3.730286q-2.852571 22.308571-10.825143 50.834286-17.115429 5.705143-58.002286 16.310857t-62.025143 19.163429q-4.534857 10.825143-7.972571 24.283429t-5.12 22.820571-4.315429 25.965714-3.730286 23.990857q-15.433143 84.553143-50.029714 239.689143t-44.251429 203.117714q-1.170286 5.12-7.460571 33.133714t-11.410286 51.419429-9.142857 47.689143-3.437714 32.841143l0.585143 10.313143q9.728 2.267429 105.691429 17.700571-1.682286 25.161143-9.142857 56.539429-6.290286 0-18.578286 0.877714t-18.578286 0.877714q-16.603429 0-49.737143-5.705143t-49.152-5.705143q-78.848-1.170286-117.686857-1.170286-29.110857 0-81.700571 5.12t-69.12 6.290286z"></path>
                        </g>                        
                    </symbol>
                    <symbol id="wqToolsIcoBold">
                        <title>Bold</title>
                        <path d="M426.857143 869.142857q42.285714 18.285714 80 18.285714 214.857143 0 214.857143-191.428571 0-65.142857-23.428571-102.857143-15.428571-25.142857-35.142857-42.285714t-38.571429-26.571429-46-14.285714-48-6-54-1.142857q-41.714286 0-57.714286 5.714286 0 30.285714 2.857143 90.857143t2.857143 90.285714q0 4.571429-0.571429 38.571429t2.857143 55.142857 2.571429 47.714286 6.857143 38zm-8-426.285714q24 4 62.285714 4 46.857143 0 81.714286-7.428571t62.857143-25.428571 42.571429-51.142857 14.571429-81.142857q0-40-16.571429-70t-45.142857-46.857143-61.714286-24.857143-70.857143-8q-28.571429 0-74.285714 7.428571 0 28.571429 2.285714 86.285714t2.285714 86.857143q0 15.428571 2.857143 45.714286t2.857143 45.142857q0 26.285714 0.571429 39.428571zm-309.142857 508l1.142857-53.714286q8.571429-2.285714 48.571429-9.142857t60.571429-15.428571q4-6.857143 7.142857-15.428571t4.857143-19.142857 3.142857-18.571429 1.714286-21.428571 2.857143-19.428571l0-37.428571q0-561.142857-12.571429-585.714286-2.285714-4.571429-12.571429-8.285714t-25.428571-6.285714-28.285714-4-27.714286-2.571429-17.428571-1.714286l-2.285714-47.428571q56-1.142857 194.285714-6.571429t213.142857-5.428571q13.142857 0 39.142857 2.857143t38.571429 2.857143q40 0 78 7.428571t73.428571 24 61.714286 40.571429 42.285714 59.714286 16 78.571429q0 29.714286-9.428571 54.571429t-22.285714 41.142857-36.857143 32.857143-41.714286 25.714286-48 22.857143q88 20 146.571429 76.571429t58.571429 141.714286q0 57.142857-20 102.571429t-53.428571 74.571429-78.857143 48.857143-93.428571 27.714286-100.571429 8q-25.142857 0-75.428571-1.714286t-75.428571-1.714286q-60.571429 0-175.428571 6.285714t-132 6.857143z"></path>                        
                    </symbol>
                </svg>
            </div>
            <WqToolbar />
            <Editor editorState={this.state.editorState} onChange={this.onChange} />
            </div>
    }
}